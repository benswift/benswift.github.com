<!DOCTYPE html>
<html lang="en-AU">
  <head>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#be2edd">
<link rel="stylesheet" type="text/css" href="/assets/css/normalize-9930e054e512c7aeb21cfc22c0816d7f701b97910a1bd67954c03be76c9f3e90.css">

<!-- fontawesome -->
<script defer src="https://use.fontawesome.com/releases/v5.6.3/js/all.js" integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1" crossorigin="anonymous"></script>

<!-- anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js" integrity="sha256-m1eTvwEHwmsw4+XKF7BshClVJEPwTVycveNl0CS0Mkk=" crossorigin="anonymous"></script>

<script>
 anchors.options = {
   visible: "touch",
   icon: "#"
 };
 document.addEventListener("DOMContentLoaded", function(event) {
   anchors.add("article > h2, article > h3");
 });
</script>


<!-- highlight.js -->
<script src="/assets/js/highlight.pack-cf914cddba9ab5aaea7819f239c3df41f840b83b1c8c54e37675236e6b2ed74c.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/assets/css/atom-one-dark-470b7658ef8aee2f2bb86babcc8a359491361d94113130f47878659a07f47eac.css">

<script>
 hljs.initHighlightingOnLoad();
</script>


<!-- Begin Jekyll SEO tag v2.6.0 -->
<title>On livecoding annotations and visualisations | benswift.me</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="On livecoding annotations and visualisations" />
<meta name="author" content="Ben Swift" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve just finished reading Charlie Roberts’ interactive web essay on annotations and visualisations for live code. If you haven’t read it, go do that now—and make sure you have some speakers/headphones to listen to the code examples, because it would be a real shame to read it without watching/listening to his ideas in action. All the code samples (with the visual annotations) are live-editable, both running “whole blocks” and re-evaluating individual expressions with ctrl+enter." />
<meta property="og:description" content="I’ve just finished reading Charlie Roberts’ interactive web essay on annotations and visualisations for live code. If you haven’t read it, go do that now—and make sure you have some speakers/headphones to listen to the code examples, because it would be a real shame to read it without watching/listening to his ideas in action. All the code samples (with the visual annotations) are live-editable, both running “whole blocks” and re-evaluating individual expressions with ctrl+enter." />
<link rel="canonical" href="https://benswift.me/blog/2019/01/31/on-livecoding-annotations-and-visualisations/" />
<meta property="og:url" content="https://benswift.me/blog/2019/01/31/on-livecoding-annotations-and-visualisations/" />
<meta property="og:site_name" content="benswift.me" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-31T09:53:00+11:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="On livecoding annotations and visualisations" />
<meta name="twitter:site" content="@benswift" />
<meta name="twitter:creator" content="@Ben Swift" />
<script type="application/ld+json">
{"url":"https://benswift.me/blog/2019/01/31/on-livecoding-annotations-and-visualisations/","headline":"On livecoding annotations and visualisations","dateModified":"2019-01-31T09:53:00+11:00","datePublished":"2019-01-31T09:53:00+11:00","description":"I’ve just finished reading Charlie Roberts’ interactive web essay on annotations and visualisations for live code. If you haven’t read it, go do that now—and make sure you have some speakers/headphones to listen to the code examples, because it would be a real shame to read it without watching/listening to his ideas in action. All the code samples (with the visual annotations) are live-editable, both running “whole blocks” and re-evaluating individual expressions with ctrl+enter.","author":{"@type":"Person","name":"Ben Swift"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://benswift.me/blog/2019/01/31/on-livecoding-annotations-and-visualisations/"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


	<link rel="stylesheet" type="text/css" href="/assets/css/main-fa3c3362a4ed0f3517c2bba7752c287108bda00baaad52995b02fe600ff5a73d.css">
  </head>
  <body>
	<div class="container">
	  <header>

  <nav class="logo" aria-label="site home">
	<a href="/">benswift.me</a>
  </nav>

  <nav class="navigation" aria-label="main navigation">
	<!-- in-site navigation -->
	
	

	<a class="current"href="/blog/index.html">blog</a>
	<a href="/research/">research</a>
	<a href="/teaching/">teaching</a>
	<a href="/livecoding/index.html">livecoding</a>
	<a href="/talks/index.html">talks</a>
	<a href="/bio/">bio</a>

	<!-- social icons -->
	<a href="https://github.com/benswift"><i title="benswift on GitHub" class="fab fa-github"></i></a>
	<a href="https://twitter.com/benswift"><i title="benswift on twitter" class="fab fa-twitter"></i></a>
	<a href="https://vimeo.com/benswift"><i title="benswift on Vimeo" class="fab fa-vimeo"></i></a>
	<a href="https://scholar.google.com/citations?user=OQdYgLEAAAAJ"><i title="Ben's Google Scholar profile" class="fas fa-graduation-cap"></i></a>
	<a href="/feed.xml"><i title="RSS feed for this blog" class="fas fa-rss"></i></a>
	<a href="mailto:ben@benswift.me"><i title="send Ben an email" class="fas fa-envelope"></i></a>
  </nav>

</header>

	  <main aria-label="Content">
		<article>
  <p class="post-date">31 Jan '19</p>
  <h1>On livecoding annotations and visualisations</h1>
  
<p class="post-tag-container">
  
  <a class="post-tag" href="/blog/tag/livecoding/">
	livecoding
  </a>
  
</p>


  <p>I’ve just finished reading Charlie Roberts’ <a href="https://charlieroberts.github.io/annotationsAndVisualizations/">interactive web essay on
annotations and visualisations for live
code</a>. If you
haven’t read it, go do that now—and make sure you have some
speakers/headphones to listen to the code examples, because it would be a real
shame to read it without watching/listening to his ideas in action. All the code
samples (with the visual annotations) are live-editable, both running “whole
blocks” and re-evaluating individual expressions with <code>ctrl+enter</code>.</p>

<p>The essay lays out some guiding principles:</p>

<blockquote>
  <p>There are three principles that guide the design of the presented annotations
and visualizations.</p>

  <ol>
    <li>If a value changes over time (typically related to musical progression or
signal processing), display its current state, either by adding a
visualization / annotation or by modifying the source code to reflect the
current value.</li>
    <li>Make annotations and visualizations as proximal as possible to the code
fragment responsible for generating the data they are representing.</li>
    <li>In addition to displaying when values change, whenever possible also provide
some indication of when a value is being read, in particular when there is a
direct affect on musical / sonic output.</li>
  </ol>
</blockquote>

<p>It then goes on to show some example visualisation in
<a href="http://gibberwocky.cc/">gibberwocky</a>, both in an “all in” demo and then in
bite-sized listings which show off the different specific ideas. In general, I
really like the ideas, and it’s something Andrew Sorensen and I have written
about before in our paper <a href="https://doi.org/10.1109/LIVE.2013.6617345">Visual Code Annotations for Cyberphysical
Programming</a> (2013) in the <em>1st
International Workshop on Live Programming (LIVE)</em><sup id="fnref:preprint"><a href="#fn:preprint" class="footnote">1</a></sup> (it’s reference
#4 in the essay). I’ll refer to this a bit in this post, so let’s call it “the
LIVE paper”.</p>

<p>I also think that the three points listed above are pretty solid, especially in
a multimedia livecoding context (maybe even in a broader context). One thing I
like about the visual annotations provided is that they’re mostly ASCII (or
ASCII-ish). This is not so important when deploying them in the web browser
(since you can do so much fancy styling stuff with CSS &amp; js these days) but it’s
really important when dealing with… <em>ahem</em>, more venerable editors. I ended up
having to use some unholy Emacs hacks with
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Overlays.html">overlays</a>
to get the original annotations discussed in the LIVE paper working.</p>

<p>I think that displaying hidden state in comments is a good compromise, and
avoids the need for fancy “extra-textual” overlays. Not that overlays aren’t
sometimes useful, but there’s a lot you can show with inline <code>text-decoration</code>
hacks and adding a few comments to provide ascii text to decorate (when it isn’t
explicitly represented in the first place).</p>

<h2 id="mixing-annotations-and-live-edits">Mixing annotations and live edits</h2>

<p><strong>But</strong>, (you can probably tell that there was going to be a “but” somewhere)
many of the cool annotations displayed don’t work while the code is being
edited<sup id="fnref:broken"><a href="#fn:broken" class="footnote">2</a></sup>. In some cases they actually break the code (try editing one of
the <code>'x*ox*xo--x*x*o'</code> patterns while the code’s running—you’ll end up with
new stuff in your pattern that you didn’t put there).</p>

<p>The problem isn’t so obvious when all the code listings are fully-formed on page
load, and you can just play them as is. But when you try and mess with the code
then you’ll see what I mean (again, I really suggest that you try it—it’s
super-cool being able to mess around with the live code in the browser).</p>

<p>I feel this particularly keenly because I’m a clean-slate livecoder (as is
Charlie), so I’m <em>always</em> moving through an incomplete code state until I get
something which will even run. This isn’t just a problem for clean-slate
livecoding, though—even tweaks to existing code which introduce “bad” code
states (from the visualisation’s perspective) will cause these issues.</p>

<p>We talked about this in the LIVE paper—the fact that there’s a distinction
between the “state of the world” vs “state of the code”. This is a fundamental
challenge for the sorts of inline code visualisation/annotations shown in the
essay, because it’s using the <strong>code</strong> as the “raw material” for displaying
information about the <strong>world</strong> (beat/timing and other “hidden variables”, audio
engine state and output, etc.).</p>

<p>There are a few different ways to tackle this problem:</p>

<ol>
  <li>mark some annotations as “safe” for code being edited, and some “unsafe”</li>
  <li>when code is being edited, turn off all annotations (or at least for that
expression)</li>
  <li>some sort of “grand unified theory” of the delta between the current code
state and the current execution state, and reconcile these to provide a
maximal set of acceptable visualisations (this approach includes a
<a href="https://coq.inria.fr/">coq</a> program to formally verify that you’re doing
everything right)</li>
</ol>

<p>I think the pragmatic choice is #2, as long as the “disabled edits” section is
kept as small as possible. It’s still going to be a pain, though, because when
I’m livecoding I’m tweaking stuff all the time, so it’s likely that a lot of the
code will spend a lot of the time with the visualisations disabled.</p>

<p>I’ll leave #3 up to people smarter than me 😁 (although perhaps there are
heuristics which could do a decent job).</p>

<p>Finally, I can identify with Charlie when he writes:</p>

<blockquote>
  <p>But, in the end, the feedback provided by these annotations and visualizations
have become a critical part of my live coding practice.</p>
</blockquote>

<p>I get this—in my experience (when I’ve had even more limited annotations than
the ones he shows in the essay) are just as much for my benefit as the audience.
Livecoding is hard, and any extra information you can get about what’s going on
with your code is super helpful.</p>

<p>In principle visual code annotations can be even more useful to the livecoder
because they allow her to “audition” algorithmic changes to the code
without<sup id="fnref:feedback"><a href="#fn:feedback" class="footnote">3</a></sup> actually eval-ing the code and changing the music. Here’s an
example from the essay:</p>

<pre><code class="language-js">Euclid(9, 16); /* 1010110101011010 */
</code></pre>

<p>I might not always know what the <code>9,6</code> euclidean rhythm is, but I’m by now
fairly used to looking at <code>10100010</code> sequences and “hearing” the rhythm in my
head. I could poke around with the parameters in a live set, exploring the
parameter space (and thinking through the effect it’ll have on the music) and
then only evaluating the code when I’m satisfied. That’s super powerful—the
equivalent of the DJ cueing the next track with one can on their ear, and one
ear in the club—something which I don’t have currently in my livecoding setup
(although others might).</p>

<h2 id="conclusion">Conclusion</h2>

<p>You can probably tell that I think there’s a productive research agenda
here—and I hope Charlie continues with it. I hope to help out myself, too. I
guess my main point is just to shout from the rooftops:</p>

<blockquote>
  <p>any code visualisation/annotation techniques must be robust for <strong>code which is
currently being edited</strong></p>
</blockquote>

<p>I’m not just talking about technical issues, either; obviously any
demo/prototype is going to have those, but they’re fixable. I think there are
deeper issues with trying to use <em>live</em> text as both the description of program
behaviour and as a “view” on the hidden state of the program.</p>

<p>Anyway, this is just a blog post, so I’m off the hook with regard to rigour,
accountability and just general good scholarship, right 😜</p>

<h2 id="addendum-thoughts-on-web-publishing">Addendum: thoughts on web publishing</h2>

<p>I love that this essay/paper is published online—the interactive examples are
crucial to getting the point across. I know that some conferences &amp; journals
these days allow html submission (nicer for reading on mobile, anyway) and other
multimedia artefacts (audio/video recordings) but it’s still hard to get
traction for this sort of rich, interactive in-browser work. The fact that at
the end Charlie has to say:</p>

<blockquote>
  <p>If you’re going to cite this website in an academic paper, please consider
also citing either reference #1 or reference #7 given above; citations of such
papers count more in academia than citations of a website. Plus, there’s
further information in them not covered in this essay. Thank you!</p>
</blockquote>

<p>Oh well. Mad props to Charlie for putting this out there for comment and
discussion, and hopefully there are a new generation of publications<sup id="fnref:distill"><a href="#fn:distill" class="footnote">4</a></sup>
where this stuff can be front-and-centre, not just a weird “supplemental web
materials” section to a traditional pdf.</p>

<div class="footnotes">
  <ol>
    <li id="fn:preprint">

      <p>if you don’t have institutional access to the IEEE then just <a href="mailto:ben.swift@anu.edu.au">email
me</a> and I can send you a pre-print. <a href="#fnref:preprint" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:broken">
      <p>Charlie, if I’m doing it wrong, please let me know :) <a href="#fnref:broken" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:feedback">

      <p>Yes, I know that the real-time feedback of hearing the sound is crucial, and
I’m not for a second saying that we do away with it, but there are some
situations where I want to check what the result of an algorithmic/parameter
change might be without inflicting it on the audience. <a href="#fnref:feedback" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:distill">

      <p><a href="https://distill.pub/">Distill</a> is great, but it’s pretty DL/AI-focussed.
The livecoding community needs something similar (although it does
privilege livecoding environments which work in the brower, so that’s not
ideal either. Hmm.) <a href="#fnref:distill" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</article>


	  </main>
	  <footer>
  <script>
   const cafeUrls = [
	 "https://biginelli.com/",
	 "http://tilleys.com.au",
	 "https://www.facebook.com/goodbrothercafe/",
	 "https://frontgallerycafe.com",
	 "https://www.facebook.com/thecoffeegrounds",
	 "https://redbrickcoffee.com.au/redbrick/"
   ];
   const randomCafe = () => {
	 window.location.href = cafeUrls[Math.floor(Math.random()*cafeUrls.length)];
   };
  </script>

  <!-- colophon -->
  <p>
	designed & built with
	<a href="https://jekyllrb.com"><i title="Jekyll homepage" class="fas fa-vial"></i></a>,
	<a id="cafe-url" onclick="randomCafe();"><i title="the website of one of Ben's favourite coffee shops" class="fas fa-coffee" style="cursor: pointer;"></i></a> and
	<a href="https://www.youtube.com/watch?v=6H2FRxvsd2M"><i title="what is love?" class="fas fa-heart"></i></a>
	by Ben Swift
  </p>

  <!-- licence -->
  <p style="font-size: 1.3em;">
	<a title="CC BY-NC-SA licence" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
  <i class="fab fa-creative-commons"></i>
  <i class="fab fa-creative-commons-by"></i>
  <i class="fab fa-creative-commons-nc"></i>
  <i class="fab fa-creative-commons-sa"></i>
</a>

  </p>

  <!-- throw shade on IE -->
  <p>
	uses <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/grid">CSS Grid</a>,
	works on all <a href="http://outdatedbrowser.com/en">modern browsers</a>
  </p>

  <!-- open source humblebrag -->
  <p>
	site revision <code>df801ac</code>,
	<a href="https://github.com/benswift/benswift.github.io/blob/df801ac/_posts/2019-01-31-on-livecoding-annotations-and-visualisations.md">source
	available on <i title="benswift on GitHub" class="fab fa-github"></i></a>
  </p>

</footer>

	</div>
  </body>
</html>
