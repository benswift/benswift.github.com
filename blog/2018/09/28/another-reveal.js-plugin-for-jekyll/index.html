<!DOCTYPE html>
<html lang="en-AU">
  <head>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#be2edd">
<link rel="stylesheet" type="text/css" href="/assets/css/normalize-9930e054e512c7aeb21cfc22c0816d7f701b97910a1bd67954c03be76c9f3e90.css">

<!-- fontawesome -->
<script defer src="https://use.fontawesome.com/releases/v5.6.3/js/all.js" integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1" crossorigin="anonymous"></script>

<!-- anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js" integrity="sha256-m1eTvwEHwmsw4+XKF7BshClVJEPwTVycveNl0CS0Mkk=" crossorigin="anonymous"></script>

<script>
 anchors.options = {
   visible: "touch",
   icon: "#"
 };
 document.addEventListener("DOMContentLoaded", function(event) {
   anchors.add("article > h2, article > h3");
 });
</script>


<!-- highlight.js -->
<script src="/assets/js/highlight.pack-cf914cddba9ab5aaea7819f239c3df41f840b83b1c8c54e37675236e6b2ed74c.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/assets/css/atom-one-dark-470b7658ef8aee2f2bb86babcc8a359491361d94113130f47878659a07f47eac.css">

<script>
 hljs.initHighlightingOnLoad();
</script>


<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Another reveal.js plugin for Jekyll | benswift.me</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Another reveal.js plugin for Jekyll" />
<meta name="author" content="Ben Swift" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I use Jekyll to create my course websites and reveal.js to create my lecture slides. Both of them are awesome, and allow me to focus on writing (hopefully) great content, and the formatting/presentation stuff stays out of the way until I git push the updates to the server." />
<meta property="og:description" content="I use Jekyll to create my course websites and reveal.js to create my lecture slides. Both of them are awesome, and allow me to focus on writing (hopefully) great content, and the formatting/presentation stuff stays out of the way until I git push the updates to the server." />
<link rel="canonical" href="https://benswift.me/blog/2018/09/28/another-reveal.js-plugin-for-jekyll/" />
<meta property="og:url" content="https://benswift.me/blog/2018/09/28/another-reveal.js-plugin-for-jekyll/" />
<meta property="og:site_name" content="benswift.me" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-28T11:42:26+08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@benswift" />
<meta name="twitter:creator" content="@Ben Swift" />
<script type="application/ld+json">
{"dateModified":"2018-09-28T11:42:26+08:00","datePublished":"2018-09-28T11:42:26+08:00","headline":"Another reveal.js plugin for Jekyll","url":"https://benswift.me/blog/2018/09/28/another-reveal.js-plugin-for-jekyll/","mainEntityOfPage":{"@type":"WebPage","@id":"https://benswift.me/blog/2018/09/28/another-reveal.js-plugin-for-jekyll/"},"author":{"@type":"Person","name":"Ben Swift"},"description":"I use Jekyll to create my course websites and reveal.js to create my lecture slides. Both of them are awesome, and allow me to focus on writing (hopefully) great content, and the formatting/presentation stuff stays out of the way until I git push the updates to the server.","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


	<link rel="stylesheet" type="text/css" href="/assets/css/main-77c3aa51388e311d9286002bcd81634b1b505ed877faff590f7af7c0d8a64799.css">
  </head>
  <body>
	<div class="container">
	  <header>

  <nav class="logo">
	<a href="/">benswift.me</a>
  </nav>

  <nav class="navigation">
	<!-- in-site navigation -->
	
	

	<a class="current"href="/blog/index.html">blog</a>
	<a href="/research/">research</a>
	<a href="/teaching/">teaching</a>
	<a href="/livecoding/index.html">livecoding</a>
	<a href="/talks/index.html">talks</a>
	<a href="/bio/">bio</a>

	<!-- social icons -->
	<a href="https://github.com/benswift"><i title="Visit benswift on GitHub" class="fab fa-github"></i></a>
	<a href="https://twitter.com/benswift"><i title="Visit benswift on twitter" class="fab fa-twitter"></i></a>
	<a href="https://vimeo.com/benswift"><i title="Visit benswift on Vimeo" class="fab fa-vimeo"></i></a>
	<a href="https://scholar.google.com/citations?user=OQdYgLEAAAAJ"><i title="Visit Ben's Google Scholar profile" class="fas fa-graduation-cap"></i></a>
	<a href="/feed.xml"><i title="View RSS feed for this blog" class="fas fa-rss"></i></a>
	<a href="mailto:ben@benswift.me"><i title="Send Ben an email" class="fas fa-envelope"></i></a>
  </nav>

</header>

	  <main aria-label="Content">
		<article>
  <p class="post-date">28 Sep '18</p>
  <h1>Another reveal.js plugin for Jekyll</h1>
  
<p class="post-tags">
  tags:
  
  <span>web</span>
  
</p>


  <p>I use <a href="https://jekyllrb.com/">Jekyll</a> to create my course websites and
<a href="https://github.com/hakimel/reveal.js/">reveal.js</a> to create my lecture slides.
Both of them are awesome, and allow me to focus on writing (hopefully) great
content, and the formatting/presentation stuff stays out of the way until I <code>git
push</code> the updates to the server.</p>

<p>There are a few ways of making these two tools (Jekyll and reveal.js) play
nicely together: see <a href="https://github.com/dploeger/jekyll-revealjs">here</a> and
<a href="https://medium.com/aerobatic-blog/building-a-reveal-js-presentation-with-jekyll-collections-52bcdba4114a">here</a>
for example. However, most of these require you to put each slide in a new <code>.md</code>
file, which is a pain.</p>

<p>What I want to do is to write one <code>.md</code> file per presentation, and have the
level 1 and level 2 headings (i.e. <code>#</code> and <code>##</code>) determine the slide splits
(this is pretty much how <a href="https://pandoc.org/MANUAL.html#producing-slide-shows-with-pandoc">pandoc does
it</a>).</p>

<p>I wrote a simple <a href="https://jekyllrb.com/docs/plugins/">Jekyll plugin</a> to make
this happen—which has just a couple of moving parts</p>

<p class="hl-para">Because the source for this <a href="https://github.com/benswift/benswift.github.io/">whole blog is on
GH</a>, then you can just head
there and see it for yourself if you’re the sort of person who prefers reading
code to prose. Think of this blog post as a “companion piece”.</p>

<h2 id="0-download-the-revealjs-source">0. download the reveal.js source</h2>

<p>It’s step 0 because it’s super easy—just head to
<a href="https://github.com/hakimel/reveal.js/releases">GitHub</a>, download &amp; unzip the
latest release. You can put it wherever you like in your main site folder; I
usually put it in <code>assets/</code>.</p>

<h2 id="the-revealify-filter">1. the revealify <a href="https://jekyllrb.com/docs/plugins/filters/">filter</a></h2>

<p>First, put this code into a <code>revealify.rb</code> file in your Jekyll <code>_plugins</code>
directory:</p>

<pre><code class="language-ruby"># (c) Ben Swift 2017-2019, MIT Licence
# ben.swift@anu.edu.au

# a liquid filter for turning regular md output into the &lt;section&gt;-enclosed
# chunks required by reveal.js

require 'jekyll'
require 'nokogiri'

module Jekyll

  module Revealify

    def revealify(html)

      # parse content
      content = Nokogiri::HTML.fragment(html)

      # create an empty node
      reveal_div = Nokogiri::HTML.fragment('&lt;div class="reveal"&gt;&lt;div class="slides"&gt;&lt;/div&gt;&lt;/div&gt;', 'UTF-8')
      slides_div = reveal_div.search('.slides').first

      content.xpath("*").each do |element|

        # &lt;section&gt; elements should be passed through as-is
        if element.matches? "section"
          slides_div.add_child(element.dup)

        else
          # on "split" elements (&lt;h1&gt;, &lt;h2&gt;, &lt;hr&gt;)
          if element.matches? "h1,h2,hr"
            current_section = slides_div.add_child("&lt;section&gt;").first
            # hoist all the header's attributes up to the wrapper element
            # not sure if this will always work, but here goes...
            element.keys.each do |attribute|
              # relies on the fact that the "current" wrapper node is the last child in ret
              current_section[attribute] = element[attribute]
              # element.delete attribute
            end
          end

          # add the element to the current &lt;section&gt; (i.e. the current slide)
          # unless it's just an &lt;hr&gt; (which are used for splitting only)
          current_section = slides_div.last_element_child
          current_section.add_child(element.dup) unless element.matches? "hr"
        end

      end

      reveal_div.to_html
    end

  end

end

Liquid::Template.register_filter(Jekyll::Revealify)

</code></pre>

<h2 id="2-add-a-reveal-layout">2. add a reveal <a href="https://jekyllrb.com/docs/layouts/">layout</a></h2>

<p>You’ll need a new <a href="https://jekyllrb.com/docs/layouts/">layout</a> as well: create a
<code>reveal.html</code> file in your Jekyll <code>_layouts</code> directory and make sure that the
body tag has this in it (you’ll need to make sure it’s got the right paths &amp;
other stuff for your setup). The key part is that first <code>{{ content |
revealify }}</code> line—that takes the content of your page (the jekyll
<code>.md</code> file with <code>layout: reveal</code> in the frontmatter) and passes it through the
“revealify” filter plugin we <a href="#the-revealify-filter">made earlier</a>.</p>

<p>The configuration stuff here is just the example config from
<a href="https://github.com/hakimel/reveal.js#configuration">reveal.js</a>, so feel free to
tweak to suit your own presentation.</p>

<pre><code class="language-html">&lt;!-- this is where the reveailfy filter gets applied --&gt;
{{ content | revealify }}

&lt;!-- load the reveal.js css &amp; js (assuming you've put it in assets/)--&gt;
&lt;link rel="stylesheet" href="{{site.baseurl}}/assets/reveal.js-3.7.0/css/reveal.css"&gt;
&lt;link rel="stylesheet" href="{{site.baseurl}}/assets/reveal.js-3.7.0/css/theme/white.css"&gt;
&lt;script src="{{site.baseurl}}/assets/reveal.js-3.7.0/js/reveal.js" type="text/javascript"&gt;&lt;/script&gt;

&lt;!-- configure the presentation, (you can tweak options to suit) --&gt;
&lt;script&gt;
 Reveal.initialize({

   // Display presentation control arrows
   controls: true,

   // Help the user learn the controls by providing hints, for example by
   // bouncing the down arrow when they first encounter a vertical slide
   controlsTutorial: true,

   // Determines where controls appear, "edges" or "bottom-right"
   controlsLayout: 'bottom-right',

   // Visibility rule for backwards navigation arrows; "faded", "hidden"
   // or "visible"
   controlsBackArrows: 'faded',

   // Display a presentation progress bar
   progress: true,

   // Display the page number of the current slide
   slideNumber: false,

   // Push each slide change to the browser history
   history: false,

   // Enable keyboard shortcuts for navigation
   keyboard: true,

   // Enable the slide overview mode
   overview: true,

 });
&lt;/script&gt;
</code></pre>

<p class="hl-para">The full <a href="https://jekyllrb.com/docs/layouts/">layout</a> file will depend on how
the rest of your site works (where you’ve put the <code>reveal.js-x.x.x</code> folder,
etc.) so I haven’t included the full file here (you can <a href="https://github.com/benswift/benswift.github.io/blob/source/_layouts/reveal.html">see it on
GitHub</a>,
though). Also remember that you can see the full list of reveal configuration
options <a href="https://github.com/hakimel/reveal.js#configuration">in the README</a>:</p>

<h2 id="3-write-your-slides-as-markdown-content">3. write your slides as markdown content</h2>

<p>Finally, write your content as a regular jekyll post which uses the <code>reveal</code>
layout, e.g.</p>

<pre><code class="language-md">---
title: "Week 1: intro"
layout: reveal
---

## Intro

- welcome to the course
- we're gonna learn all the things

## Timeline

- first, we'll sit in boring lectures...
- ... then, there will be a huge exam!

fun times.
</code></pre>

<p>Then, you get all the niceties of the <code>jekyll watch</code> cycle; livereload,
auto-compilation of scss assets, etc.</p>

<p>And if you need to do something interesting with the formatting or layout of
your content, then you can just drop straight into writing HTML (as you can
always do in a markdown file).</p>

<h2 id="4-write-amazing-content">4. write amazing content</h2>

<p>This is the hard part. But at least if you’ve got a nice workflow for actually
turning your content into nice looking slides then you’ve got a head start :)</p>

</article>


	  </main>
	  <footer>
  <script>
   const cafeUrls = [
	 "https://biginelli.com/",
	 "http://tilleys.com.au",
	 "https://www.facebook.com/goodbrothercafe/",
	 "https://frontgallerycafe.com",
	 "https://www.facebook.com/thecoffeegrounds",
	 "https://redbrickcoffee.com.au/redbrick/"
   ];
   const randomCafe = () => {
	 window.location.href = cafeUrls[Math.floor(Math.random()*cafeUrls.length)];
   };
  </script>

  <!-- colophon -->
  <p>
	designed & built with
	<a href="https://jekyllrb.com"><i title="Visit Jekyll website" class="fas fa-vial"></i></a>,
	<a id="cafe-url" onclick="randomCafe();"><i title="Visit the website of one of Ben's favourite coffee shops" class="fas fa-coffee" style="cursor: pointer;"></i></a> and
	<a href="https://www.youtube.com/watch?v=6H2FRxvsd2M"><i title="what is love?" class="fas fa-heart"></i></a>
	by Ben Swift
  </p>

  <!-- licence -->
  <p style="font-size: 1.3em;">
	<a title="CC BY-NC-SA licence" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
  <i class="fab fa-creative-commons"></i>
  <i class="fab fa-creative-commons-by"></i>
  <i class="fab fa-creative-commons-nc"></i>
  <i class="fab fa-creative-commons-sa"></i>
</a>

  </p>

  <!-- throw shade on IE -->
  <p>
	uses <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/grid">CSS Grid</a>,
	works on all <a href="http://outdatedbrowser.com/en">modern browsers</a>
  </p>

  <!-- open source humblebrag -->
  <p>
	site revision <code>ed76647</code>,
	<a href="https://github.com/benswift/benswift.github.io/blob/ed76647/_posts/2018-09-28-another-reveal.js-plugin-for-jekyll.md">source
	available on <i title="Visit benswift on GitHub" class="fab fa-github"></i></a>
  </p>

</footer>

	</div>
  </body>
</html>
